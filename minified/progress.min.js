(function(m,f){"object"===typeof exports?f(exports):"function"===typeof define&&define.amd?define(["exports"],f):f(m)})(this,function(m){function f(a){this._targetElement="undefined"!=typeof a.length?a:[a];"undefined"===typeof window._progressjsId&&(window._progressjsId=1);"undefined"===typeof window._progressjsIntervals&&(window._progressjsIntervals={});this._options={theme:"blue",overlayMode:!1,considerTransition:!0}}function l(a,c){var e=this;100<=c&&(c=100);a.hasAttribute("data-progressjs")&&
setTimeout(function(){"undefined"!=typeof e._onProgressCallback&&e._onProgressCallback.call(e,a,c);var b=k(a);b.style.width=parseInt(c)+"%";var b=b.querySelector(".progressjs-percent"),d=parseInt(b.innerHTML.replace("%",""));(function(a,b,c){function d(a,b,c){var g=Math.abs(b-c);3>g?f=30:20>g?f=20:intervanIn=1;0!=b-c&&(a.innerHTML=(e?++b:--b)+"%",setTimeout(function(){d(a,b,c)},f))}var e=!0;b>c&&(e=!1);var f=10;d(a,b,c)})(b,d,parseInt(c))},50)}function k(a){a=parseInt(a.getAttribute("data-progressjs"));
return document.querySelector('.progressjs-container > .progressjs-progress[data-progressjs="'+a+'"] > .progressjs-inner')}function q(a,c){var e=this,b=this._targetElement[0];b&&(b=parseInt(b.getAttribute("data-progressjs")),"undefined"!=typeof window._progressjsIntervals[b]&&clearInterval(window._progressjsIntervals[b]),window._progressjsIntervals[b]=setInterval(function(){p.call(e,a)},c))}function p(a){for(var c=0,e=this._targetElement.length;c<e;c++){var b=this._targetElement[c];if(b.hasAttribute("data-progressjs")){var d=
k(b);(d=parseInt(d.style.width.replace("%","")))&&l.call(this,b,d+(a||1))}}}function r(a){"undefined"!=typeof this._onBeforeEndCallback&&(!0===this._options.considerTransition?k(this._targetElement[0]).addEventListener(s(),this._onBeforeEndCallback,!1):this._onBeforeEndCallback.call(this));var c=this._targetElement[0];if(c){for(var c=parseInt(c.getAttribute("data-progressjs")),e=0,b=this._targetElement.length;e<b;e++){var d=this._targetElement[e],g=k(d);if(!g)return;var f=1;100>parseInt(g.style.width.replace("%",
""))&&(l.call(this,d,100),f=500);(function(a,b){setTimeout(function(){a.parentNode.className+=" progressjs-end";setTimeout(function(){a.parentNode.parentNode.removeChild(a.parentNode);b.removeAttribute("data-progressjs")},1E3)},f)})(g,d)}if(window._progressjsIntervals[c])try{clearInterval(window._progressjsIntervals[c]),window._progressjsIntervals[c]=null,delete window._progressjsIntervals[c]}catch(u){}"function"===typeof a&&a()}}function t(a){var c=this._targetElement[0];if(c){for(var c=parseInt(c.getAttribute("data-progressjs")),
e=0,b=this._targetElement.length;e<b;e++){var d=this._targetElement[e],g=k(d);if(!g)return;(function(a,b){a.parentNode.className+=" progressjs-end";setTimeout(function(){a.parentNode.parentNode.removeChild(a.parentNode);b.removeAttribute("data-progressjs")},1E3)})(g,d)}if(window._progressjsIntervals[c])try{clearInterval(window._progressjsIntervals[c]),window._progressjsIntervals[c]=null,delete window._progressjsIntervals[c]}catch(f){}"function"===typeof a&&a()}}function s(){var a,c=document.createElement("fakeelement"),
e={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in e)if(void 0!==c.style[a])return e[a]}var n=function(a){if("object"===typeof a)return new f(a);if("string"===typeof a){if(a=document.querySelectorAll(a))return new f(a);throw Error("There is no element with given selector.");}return new f(document.body)};n.version="0.1.0";n.fn=f.prototype={clone:function(){return new f(this)},setOption:function(a,c){this._options[a]=
c;return this},setOptions:function(a){var c=this._options,e={},b;for(b in c)e[b]=c[b];for(b in a)e[b]=a[b];this._options=e;return this},start:function(){"undefined"!=typeof this._onBeforeStartCallback&&this._onBeforeStartCallback.call(this);if(!document.querySelector(".progressjs-container")){var a=document.createElement("div");a.className="progressjs-container";document.body.appendChild(a)}for(var a=0,c=this._targetElement.length;a<c;a++){var e=this._targetElement[a];if(!e.hasAttribute("data-progressjs")){var b;
b=e;var d={};"body"===b.tagName.toLowerCase()?(d.width=b.clientWidth,d.height=b.clientHeight):(d.width=b.offsetWidth,d.height=b.offsetHeight);for(var f=0,h=0;b&&!isNaN(b.offsetLeft)&&!isNaN(b.offsetTop);)f+=b.offsetLeft,h+=b.offsetTop,b=b.offsetParent;d.top=h;d.left=f;b=d;e.setAttribute("data-progressjs",window._progressjsId);d=document.createElement("div");d.className="progressjs-progress progressjs-theme-"+this._options.theme;"body"===e.tagName.toLowerCase()?d.style.position="fixed":d.style.position=
"absolute";d.setAttribute("data-progressjs",window._progressjsId);f=document.createElement("div");f.className="progressjs-inner";h=document.createElement("div");h.className="progressjs-percent";h.innerHTML="1%";f.appendChild(h);this._options.overlayMode&&"body"===e.tagName.toLowerCase()?(d.style.left=0,d.style.right=0,d.style.top=0,d.style.bottom=0):(d.style.left=b.left+"px",d.style.top=b.top+"px",d.style.width="BODY"==e.nodeName?"100%":b.width+"px",this._options.overlayMode&&(d.style.height=b.height+
"px"));d.appendChild(f);document.querySelector(".progressjs-container").appendChild(d);l(e,1);++window._progressjsId}}return this},set:function(a){for(var c=0,e=this._targetElement.length;c<e;c++)l.call(this,this._targetElement[c],a);return this},increase:function(a){p.call(this,a);return this},autoIncrease:function(a,c){q.call(this,a,c);return this},end:function(a){r.call(this,a);return this},kill:function(a){t.call(this,a);return this},onbeforeend:function(a){if("function"===typeof a)this._onBeforeEndCallback=
a;else throw Error("Provided callback for onbeforeend was not a function");return this},onbeforestart:function(a){if("function"===typeof a)this._onBeforeStartCallback=a;else throw Error("Provided callback for onbeforestart was not a function");return this},onprogress:function(a){if("function"===typeof a)this._onProgressCallback=a;else throw Error("Provided callback for onprogress was not a function");return this}};return m.progressJs=n});
